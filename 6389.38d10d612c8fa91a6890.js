"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6389],{63410:(e,t,a)=>{a.d(t,{Ly:()=>u,Oj:()=>b,b$:()=>h,fY:()=>y,hU:()=>g,j$:()=>_,jf:()=>f,w0:()=>m});var n,s,r,o,i,d,c,l,p=a(69e3);!function(e){e.General="",e.Account="account",e.Common="common",e.Bug="bug",e.Feat="feature"}(n||(n={})),function(e){e[e.HideStillReport=2048]="HideStillReport",e[e.Account=4096]="Account"}(s||(s={})),function(e){e[e.ImageAnswer=1]="ImageAnswer",e[e.CategoryName=2]="CategoryName",e[e.Link=3]="Link"}(r||(r={})),function(e){e[e.NotEntranceShowType=0]="NotEntranceShowType",e[e.NotSolveAfterShow=1]="NotSolveAfterShow",e[e.NotSolveBeforeShow=2]="NotSolveBeforeShow",e[e.NotSolveAfterNotShow=3]="NotSolveAfterNotShow"}(o||(o={})),function(e){e[e.AlwaysShow=0]="AlwaysShow"}(i||(i={})),function(e){e.General="general"}(d||(d={})),function(e){e.V2="v2",e.V3="v3"}(c||(c={})),function(e){e.Yes="yes",e.No="no"}(l||(l={}));const g="general",u={5678:"login_page",9190:"login_page_lite",13e3:"abnor_live_purch",13417:"eg_referral",12043:"th_referral",10541:"br_referral",10561:"id_referral",11087:"Creator_Fund_EU",10960:"Creator_Fund",15376:"ca_referral",15375:"au_referral",15048:"BA_registration",13186:"TikTok_shoutouts",12996:"balance_page",13053:"br_referral_lite"},_=[],m=3,f=4,y={getListV2:"/feedback/2/common_feedback_list/",getListV3:"/feedback/3/common_feedback_list/",getNewestReply:"/api/feedback/v1/newest_reply/",uploadImage:"/node/feedback/upload_image/",getReportRecords:"/feedback/3/list/",submitFeedback:"/feedback/2/post_message/"},h=["image/png","image/jpeg","image/jpg","image/bmp"],b={id:"",label:p.j.HELP_CENTER.key,translated:!1}},69e3:(e,t,a)=>{a.d(t,{j:()=>n});const n={IS_YOUR_PROBLEM_RESOLVED:{key:"Is your problem resolved?"},BACKEND_SETTINGS_YES:{key:"backend_settings_yes"},BACKEND_SETTINGS_NO:{key:"backend_settings_no"},THANK_YOU_FOR_YOUR_FEEDBACK:{key:"Thank you for your feedback"},BACKEND_SETTINGS_STILLHAVEPROBLEM:{key:"backend_settings_stillhaveproblem"},HELP_CENTER:{key:"Help Center"},BACKEND_SETTINGS_TOPIC_TITLE:{key:"backend_settings_topictitle"},FEEDBACK_AND_HELP:{key:"Feedback and help"},FEEDBACK_PC_BACK:{key:"feedback_pc_back"},BACKEND_SETTINGS_FAQTITLE:{key:"backend_settings_faqtitle"},REPORT_A_PROBLEM:{key:"Report a problem"},FEEDBACK_PC_HISTORY:{key:"feedback_pc_history"},TELL_US_YOUR_FEEDBACK:{key:"Tell us your feedback"},PLEASE_PROVIDE_AS_MUCH_DETAIL_AS_POSSIBLE:{key:"Please provide as much detail as possible"},FEEDBACK_PC_UPLOAD:{key:"feedback_pc_upload"},SUBMIT:{key:"Submit"},NETWORK_ERROR_PLEASE_TRY_AGAIN:{key:"Network error. Please try again."},COM_MIG_YOUR_SUPPORT_TICKETS:{key:"com_mig_your_support_tickets"},DESCRIPTION_MUST_BE_AT_LEAST_2_CHARS:{key:"Description must be at least 2 characters"}}},34873:(e,t,a)=>{a.d(t,{$L:()=>d,CX:()=>p,I$:()=>c,Vj:()=>g,WS:()=>i,cv:()=>r,iu:()=>u,m1:()=>s,sB:()=>v,xs:()=>l});var n=a(63410);function s(){return{appkey:"tiktok-web",app_key:"tiktok-web",aid:1284,app_name:"tiktok_web",iid:"0"}}function r(e){return e?e.toLocaleLowerCase().split("-")[0].replace("pt","pt_BR").replace("zh","zh-TW"):"en"}function o(e){var t;const a=e.EntranceShowType;return{id:e.FaqId,name:e.Name,value:e.Value,url:e.Url,children:(null!==(t=e.Children)&&void 0!==t?t:[]).map(o),knowledgeType:e.KnowledgeType,entranceShowType:a,imageUrl:e.ImageUrl,originLabelId:e.OriginLabelId,ticketAppId:e.TicketAppId,ticketCategoryId:e.TicketCategoryId,flags:2===a?0:2048,neverShowNeedMoreHelp:3===a}}function i(e){const{statusCode:t,statusMessage:a,faqInfoMap:n,entranceMap:s}=e;return{statusCode:t,statusMessage:a,faqInfoMap:Object.entries(null!=n?n:{}).reduce(((e,[t,a])=>e?(e[t]=(a||[]).map(o),e):e),{}),entranceMap:s}}function d({faqInfoMap:e,entranceMap:t,faqType:a,entrance:n}){var s;const r=("common"===a?"common":n===(null==t?void 0:t.general)&&"general")||"general";return null!==(s=null==e?void 0:e[r])&&void 0!==s?s:[]}function c(e){return n.j$.some((t=>t===e))}function l(e){var t;return null!==(t=Array.isArray(e)?e[0]:e)&&void 0!==t?t:""}function p(e){return n.Ly[l(e)]||""}function g(e,t,a={flattened:{},levels:[]}){return(e||[]).reduce(((e,a)=>{const n=(t?[...(null==t?void 0:t.__parents)||[],t.id]:[]).length,s=Object.assign(Object.assign({},a),{level:n,__parents:t?[...(null==t?void 0:t.__parents)||[],t.id]:[]});return e.flattened[s.id]=s,e.levels[n]=e.levels[n]||{},e.levels[n][a.id]=s,g(a.children,s,e),e}),a)}function u(e){var t;return Boolean(e&&(e.length>1||(null===(t=e[0])||void 0===t?void 0:t.children.length)))}function _(e,t,a=""){return`<a\n    style="color: #00C6E9;"\n    href="mailto:${e}?subject=TikTok-Web&body=Username: ${t}   Country/Region: ${a}">${e}</a>`}n.fY.getListV2,n.fY.getListV3;const m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},f="privacy@tiktok.com",y="feedback@tiktok.com",h=new RegExp(f,"g"),b=new RegExp(y,"g");function v(e,t,a,n){let s=e;return s=s.replace(/[&<>"'/]/g,(e=>m[e]||"")),1===t&&(s=s.replace(h,(()=>_(f,null!=a?a:"",n))).replace(b,(()=>_(y,null!=a?a:"",n)))),s}},86389:(e,t,a)=>{a.d(t,{i:()=>j});var n=a(58632),s=a(64162),r=a(4126),o=a(93995),i=a(4408),d=a.n(i),c=a(9543),l=a(23999),p=a(26324),g=a(72916),u=a(74690),_=a(95719),m=a(62564),f=a(8536),y=a(20259),h=a(24451),b=a(35572),v=a(80339),k=a(67982),T=a(55322),S=a(34873),E=a(54888),A=a(7672),O=a(4474),R=a(55099),q=a(26325),C=a(63410);const I=(0,S.m1)();let F=class{constructor(e){this.fetch=e}getNewestReply(){return this.fetch.get(C.fY.getNewestReply,{query:Object.assign({},I),baseUrlType:2})}getFaqList(e){const{language:t,faqType:a,entrance:n="general"}=e,s=C.fY.getListV3,r=Object.assign(Object.assign({},I),{lang:(0,S.cv)(t),entrance:n,faqType:a,faqTypes:a});return this.fetch.get(s,{query:r}).pipe((0,m.T)((e=>({statusCode:e.status_code,statusMessage:e.status_message,faqInfoMap:e.faq_info_map,entranceMap:e.entrance_map}))))}getReportRecords(e){const{language:t,minId:a,maxId:s}=e,r=(0,n.__rest)(e,["language","minId","maxId"]),o=Object.assign(Object.assign(Object.assign({},I),{lang:(0,S.cv)(t),min_id:a,max_id:s}),r);return this.fetch.get(C.fY.getReportRecords,{query:o,baseUrlType:2})}uploadImage(e){const t=new FormData;for(let a=0;a<e.length;a++){const{file:n,height:s,width:r}=e[a];t.append("type",n.type),t.append("size",String(n.size)),t.append("name",n.name),t.append("height",String(s)),t.append("width",String(r)),t.append(`file${a}`,n)}return this.fetch.post(C.fY.uploadImage,{query:{tt_csrf_token:this.fetch.csrfToken},headers:{[q.nk]:this.fetch.csrfToken},omitContentType:!0,body:t}).pipe((0,m.T)((e=>{const{data:t,statusCode:a,isPrivateImage:n}=e;return{data:(t||[]).map((e=>({image_width:e.width,image_height:e.height,image_uri:e.url}))),isPrivateImage:n,statusCode:a}})),(0,y.W)((()=>(0,l.of)({data:[],statusCode:-1}))))}reportFeedback(e){var t;return this.fetch.post(C.fY.submitFeedback,{query:Object.assign(Object.assign({},I),e),withCredentials:!0,body:O.stringify({entrance:null!==(t=e.entrance)&&void 0!==t?t:""}),headers:{[q.nk]:this.fetch.csrfToken}})}};F=(0,n.__decorate)([(0,A._)(),(0,n.__metadata)("design:paramtypes",[R.p])],F);let j=class extends s.E{constructor(e,t){super(),this.service=e,this.bizContext=t,this.defaultState={hasNewFeedbackReply:!1,lastFeedbackReplyId:0,faq:{},records:{list:[],map:{},loading:!1,firstLoad:!1,hasMore:!0,hasDeleteData:!1,error:!1},form:{submitting:!1,success:!1,error:!1,uploadError:!1}}}setReply(e,t){e.lastFeedbackReplyId=t.feedback_id,e.hasNewFeedbackReply=t.has_reply}setFaqState(e,t){var a,n,s,r,o,i,d,c,l,p;const{faqType:g,data:u,loading:_,statusCode:m}=t,{flattened:f,levels:y}=u?(0,S.Vj)(u):{flattened:null,levels:null};e.faq[g]={data:null!==(n=null!=u?u:null===(a=e.faq[g])||void 0===a?void 0:a.data)&&void 0!==n?n:[],flattened:null!==(r=null!=f?f:null===(s=e.faq[g])||void 0===s?void 0:s.flattened)&&void 0!==r?r:{},levels:null!==(i=null!=y?y:null===(o=e.faq[g])||void 0===o?void 0:o.levels)&&void 0!==i?i:[],loading:null!==(c=null!=_?_:null===(d=e.faq[g])||void 0===d?void 0:d.loading)&&void 0!==c&&c,statusCode:null!==(p=null!=m?m:null===(l=e.faq[g])||void 0===l?void 0:l.statusCode)&&void 0!==p?p:null}}setFormState(e,t){e.form=Object.assign(Object.assign({},e.form),t)}setRecordsState(e,t){var a;e.records=Object.assign(Object.assign({},e.records),t),t.refreshRecords&&(e.records.list=[],e.records.map={}),null===(a=t.records)||void 0===a||a.forEach((({record:t,displayTime:a})=>{const n=Object.assign(Object.assign({},t),{displayTime:a});e.records.list.unshift(n),e.records.map[a]=e.records.map[a]||[],e.records.map[a].unshift(n)}))}addRecords(e,t){t.forEach((({record:t,displayTime:a})=>{const n=Object.assign(Object.assign({},t),{displayTime:a});e.records.list.unshift(n),e.records.map[a]=e.records.map[a]||[],e.records.map[a].unshift(n)}))}getNewestReply(e){return e.pipe((0,g.n)((()=>(0,c.Y)(6e5).pipe((0,u.Z)(0)).pipe((0,g.n)((()=>this.service.getNewestReply().pipe((0,_.M)((e=>{e.data||console.warn("There is no data in response.")})),(0,m.T)((e=>e.data?this.getActions().setReply(e.data):this.noop())),(0,T.n)({}))))))))}submitFeedback(e){return e.pipe((0,f.Z)((e=>{const{files:t}=e;return(null==t?void 0:t.length)?this.service.uploadImage(t).pipe((0,f.Z)((t=>{const{data:a,statusCode:n}=t;return(0,l.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:a,imageError:0!==n||!(null==a?void 0:a.length)}))})),(0,y.W)((()=>(0,l.of)(Object.assign(Object.assign({},e),{submitting:!1,imageData:[],imageError:!0}))))):(0,l.of)(Object.assign(Object.assign({},e),{imageData:[],imageError:!1}))})),(0,h.E)(this.bizContext.state$),(0,f.Z)((([e,{bizContext:t}])=>{const{content:a,feedbackId:n,imageData:s,imageError:r,isMobile:o,language:i="",region:d="",entrance:c}=e,{os:p=""}=null!=t?t:{},g=o?"webapp_mobile":"webapp_pc";if(r)return(0,l.of)(this.getActions().setFormState({submitting:!1,error:!1,success:!1,uploadError:!0}));const u={};(null==s?void 0:s.length)&&(u.is_private_image=1);const _={content:a,image_list:JSON.stringify(s||[]),qr_id:n,from:g,channel:g,sys_region:d,device:p,country:d,entrance:c,language:(0,S.cv)(i),multi_image:1,extra_params:JSON.stringify(u)};return this.service.reportFeedback(_).pipe((0,m.T)((e=>{const{err_code:t}=e;if(0===t)return this.getActions().setFormState({submitting:!1,error:!1,success:!0,uploadError:!1});throw new Error})),(0,y.W)((()=>(0,l.of)(this.getActions().setFormState({submitting:!1,error:!0,success:!1,uploadError:!1})))))})))}getReportRecords(e){return e.pipe((0,h.E)(this.state$),(0,b.p)((([{maxId:e,minId:t=0,count:a=15,language:n="",user:s,region:r},{records:o}])=>{var i;const c=s?(0,k.l3)({uniqueId:s.uniqueId,secUid:s.secUid}):"",{list:p,hasMore:g}=o,_=null!=e?e:(null===(i=p[0])||void 0===i?void 0:i.id)||0,f=0===_;return f||g?this.service.getReportRecords({language:(0,S.cv)(n),count:a,minId:t,maxId:_}).pipe((0,m.T)((e=>{const{data:t}=e,n=[];return t.forEach((e=>{const{content:t,status:a,pub_date:s,type:o}=e;if(""===t&&0===a)return this.getActions().setRecordsState({hasDeleteData:!0,loading:!1});const i=d()(1e3*s).format("YYYY-MM-DD HH:mm");e.content=(0,S.sB)(t,o,c,r),n.push({record:e,displayTime:i})})),this.getActions().setRecordsState({firstLoad:!0,hasMore:Boolean(t.length&&t.length===a),records:n,refreshRecords:f})})),(0,u.Z)(this.getActions().setRecordsState({loading:!0,firstLoad:!f})),(0,v.q)(this.getActions().setRecordsState({loading:!1}))):(0,l.of)(this.noop())})),(0,y.W)((()=>(0,l.of)(this.getActions().setRecordsState({loading:!1,error:!0})))))}getFaqList(e){return e.pipe((0,f.Z)((({entrance:e,id:t,language:a})=>{const n=(0,S.xs)(e)||(0,S.CX)(t);return this.service.getFaqList({language:(0,S.cv)(a),entrance:n,faqType:""}).pipe((0,m.T)((e=>{const{statusMessage:t,faqInfoMap:a,entranceMap:s}=(0,S.WS)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,S.$L)({faqInfoMap:a,entranceMap:s,faqType:"",entrance:n})}})),(0,y.W)((()=>(0,l.of)(this.getActions().setFaqState({faqType:"",data:[],statusCode:-1,loading:!1})))),(0,m.T)((e=>this.getActions().setFaqState(Object.assign({faqType:"",loading:!1},e)))),(0,u.Z)(this.getActions().setFaqState({loading:!0,faqType:""})),(0,v.q)(this.getActions().setFaqState({loading:!1,faqType:""}),this.terminate()))})))}getCommonFaqList(e){return e.pipe((0,f.Z)((({entrance:e,id:t,language:a})=>{const n=(0,S.xs)(e)||(0,S.CX)(t),s="common";return this.service.getFaqList({language:(0,S.cv)(a),entrance:n,faqType:s}).pipe((0,m.T)((e=>{const{statusMessage:t,faqInfoMap:a,entranceMap:r}=(0,S.WS)(e);if("success"!==t)throw new Error;return{statusCode:0,data:(0,S.$L)({faqInfoMap:a,entranceMap:r,faqType:s,entrance:n})}})),(0,y.W)((()=>(0,l.of)(this.getActions().setFaqState({faqType:s,data:[],statusCode:-1,loading:!1})))),(0,m.T)((e=>this.getActions().setFaqState(Object.assign({faqType:s,loading:!1},e)))),(0,u.Z)(this.getActions().setFaqState({loading:!0,faqType:s})),(0,v.q)(this.getActions().setFaqState({loading:!1,faqType:s}),this.terminate()))})))}};(0,n.__decorate)([(0,r.h5)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"setReply",null),(0,n.__decorate)([(0,r.h5)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"setFaqState",null),(0,n.__decorate)([(0,r.h5)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"setFormState",null),(0,n.__decorate)([(0,r.h5)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"setRecordsState",null),(0,n.__decorate)([(0,r.h5)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"addRecords",null),(0,n.__decorate)([(0,r.Mj)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.c]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"getNewestReply",null),(0,n.__decorate)([(0,r.Mj)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.c]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"submitFeedback",null),(0,n.__decorate)([(0,r.Mj)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.c]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"getReportRecords",null),(0,n.__decorate)([(0,r.Mj)({payloadGetter:1}),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.c]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"getFaqList",null),(0,n.__decorate)([(0,r.Mj)({payloadGetter:1}),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.c]),(0,n.__metadata)("design:returntype",void 0)],j.prototype,"getCommonFaqList",null),j=(0,n.__decorate)([(0,o.n)("Feedback"),(0,n.__metadata)("design:paramtypes",[F,E.$])],j)}}]);