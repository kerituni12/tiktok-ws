"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2390],{52120:(e,t,n)=>{n.d(t,{P:()=>o});const o="footnotes"},61248:(e,t,n)=>{n.r(t),n.d(t,{FootnotesModalContent:()=>I,default:()=>U});var o=n(2787),i=n(40099),r=n(58542),s=n(89143),c=n(32125);const a=(0,n(62186).default)("div",{target:"e7x4dgc0"})((()=>[{minHeight:"18rem",padding:"1.5rem",paddingTop:"2.25rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},{svg:{flexShrink:0,width:"24px",height:"24px",color:r.Tj4.UIText3}}]),"label:DivFootnotesContentContainer;"),l=(0,i.memo)((()=>(0,o.Y)(a,{children:(0,o.Y)(r.sgs,{size:"large"})})));var m=n(4474),_=n(11060),d=n(67518),u=n(93608),f=n(25616),p=n(15936),g=n(26290);const h=n.p+"6ed4cda89c56fc614036.png",y=n.p+"8ec53e67da67581733c0.png",v=(...e)=>{const t=(0,_.W6)(),n=(0,_.zy)();return{handleRemoveQueryParams:(0,i.useCallback)((()=>{const o=(0,m.exclude)(n.search,e).replace(/^[?]$/,"");t.replace(Object.assign(Object.assign({},n),{search:o}))}),[n,e,t])}};var w=n(52120);const b=(0,i.memo)((()=>{const e=(0,s.cu)(),t=(0,f.s)(),{isDark:n}=(0,d.u)(),{search:c}=(0,_.zy)(),{handleRemoveQueryParams:l}=v(w.P,"enter_from"),b=(0,i.useCallback)((()=>{e.closeModal(),u.f.sendEvent("community_notes_button_click",{button_clicked:"done",enter_from:(0,m.parse)(c).enter_from||"community_notes_all_set"}),l()}),[e,l,c]),x=(0,p.B)(b);(0,i.useEffect)((()=>u.f.sendEvent("community_notes_page_view",{page_name:"community_notes_all_set",enter_from:(0,m.parse)(c).enter_from||"community_notes_intro_page"})),[]);const D=(0,i.useMemo)((()=>(0,o.Y)("img",{src:n?h:y})),[n]);return(0,o.FD)(a,{children:[D,(0,o.Y)(g.F.H1,{weight:"bold",align:"center",style:{marginTop:"1rem"},children:t("footnotes_enrolled_title")}),(0,o.Y)(g.F.H4,{as:"p",align:"center",style:{marginTop:"0.75rem"},children:t("footnotes_enrolled_desc")}),(0,o.Y)(r.I05,{label:t("footnotes_enrolled_btn"),onClick:b,onKeyDown:x,style:{marginTop:"1.5rem"}})]})}));var x=n(57409),D=n(23237),k=n(58791);const T=n.p+"b3747398956e38d90508.png",Y=n.p+"e452d2495c3c4553152a.png";var E=n(56070),C=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function c(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}a((o=o.apply(e,t||[])).next())}))};const P=(0,i.memo)((({onJoinWaitlist:e})=>{const t=(0,s.cu)(),[n,c]=(0,i.useState)(!1),l=(0,f.s)(),{isDark:h}=(0,d.u)(),{showToast:y}=(0,D.n)("top"),{search:b}=(0,_.zy)(),{handleRemoveQueryParams:P}=v(w.P,"enter_from");(0,i.useEffect)((()=>{u.f.sendEvent("community_notes_page_view",{page_name:"community_notes_intro_page",enter_from:(0,m.parse)(b).enter_from||u.f.commonParams.page_name})}),[]);const I=(0,i.useCallback)((()=>{t.closeModal(),P(),u.f.sendEvent("community_notes_button_click",{button_clicked:"not_now",enter_from:(0,m.parse)(b).enter_from||u.f.commonParams.page_name})}),[t,P,b]),U=(0,p.B)(I),F=(0,i.useCallback)((()=>{return t=void 0,n=void 0,i=function*(){const t=C(void 0,void 0,void 0,(function*(){return E.h.post("/tiktok/v1/community_notes/intake")}));c(!0);try{const n=yield t.finally((()=>c(!1))),{status_code:o,status_message:i}=n;if(0!==o)throw new Error(`status_code: ${o}, status_msg: ${i}`);P(),e()}catch(e){y(l("footnotes_intro_toast")),c(!1)}},new((o=void 0)||(o=Promise))((function(e,r){function s(e){try{a(i.next(e))}catch(e){r(e)}}function c(e){try{a(i.throw(e))}catch(e){r(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,c)}a((i=i.apply(t,n||[])).next())}));var t,n,o,i}),[P,e,y,l]),L=(0,k.$)({actionWhenUserLoggedIn:F,modalConfig:{query:{enter_method:"community_notes_intro_page"}},sideEffect:()=>u.f.sendEvent("community_notes_button_click",{button_clicked:"join_waitlist",enter_from:(0,m.parse)(b).enter_from||u.f.commonParams.page_name})}),O=(0,p.B)(L),M=(0,i.useMemo)((()=>(0,o.Y)("img",{src:h?T:Y})),[h]),W=[{icon:(0,o.Y)(r.Xib,{size:"24px",color:"UIText3"},"TUXIconPenOnDoc"),title:"footnotes_intro_bullet1_title",desc:"footnotes_intro_bullet1_desc"},{icon:(0,o.Y)(r.tDo,{size:"24px",color:"UIText3"},"TUXIconThumbsUp"),title:"footnotes_intro_bullet2_title",desc:"footnotes_intro_bullet2_desc"},{icon:(0,o.Y)(x.q,{size:24,color:"UIText3"},"TUXIconThreeSamePerson"),title:"footnotes_intro_bullet3_title",desc:"footnotes_intro_bullet3_desc"}];return(0,o.FD)(a,{children:[M,(0,o.Y)(g.F.H1,{weight:"bold",align:"center",style:{marginTop:"1rem"},children:l("footnotes_intro_title")}),(0,o.Y)(g.F.H4,{as:"p",align:"center",style:{marginTop:"0.75rem",marginBottom:"1.5rem"},children:l("footnotes_intro_desc")}),(0,o.Y)(r.rxD,{direction:"column",gap:"1.5rem",children:W.map((({icon:e,title:t,desc:n})=>(0,o.FD)(r.rxD,{direction:"row",gap:"0.75rem",children:[e,(0,o.FD)(r.rxD,{direction:"column",gap:"6px",children:[(0,o.Y)(g.F.H3,{as:"p",weight:"medium",children:l(t)}),(0,o.Y)(g.F.H4,{as:"p",color:"UIText2",children:l(n)})]})]},t)))}),(0,o.FD)(r.rxD,{direction:"row",gap:"1rem",style:{width:"100%",maxWidth:"100%",marginTop:"1.5rem"},children:[(0,o.Y)(r.I05,{variant:"secondary",label:l("footnotes_feed_modal_btn_notNow"),onClick:I,onKeyDown:U,style:{flexGrow:1,flexBasis:0}}),(0,o.Y)(r.I05,{label:l("footnotes_intro_btn"),loading:n,onClick:L,onKeyDown:O,style:{flexGrow:1,flexBasis:0}})]})]})}));var I;!function(e){e[e.Loading=0]="Loading",e[e.JoinWaitlist=1]="JoinWaitlist",e[e.Done=2]="Done"}(I||(I={}));const U=(0,i.memo)((()=>{const[e,t]=(0,s.Nj)((e=>8===e.activeModal),c.bN),[n,a]=(0,i.useState)(I.Loading);(0,i.useEffect)((()=>{var e,t,n,o;e=void 0,t=void 0,o=function*(){try{const e=new Promise(((e,t)=>setTimeout((()=>t(new Error("TIMEOUT"))),1e4))),t=C(void 0,void 0,void 0,(function*(){return E.h.get("/tiktok/v1/community_notes/intake/check")})),n=yield Promise.any([t,e]);if(!n)throw new Error("TIMEOUT");const{status_code:o,status_message:i,labels:r}=n;if(0!==o)throw new Error(`status_code: ${o}, status_msg: ${i}`);if(null==r?void 0:r.includes("tns_community_notes_waitlist"))return void a(I.Done);a(I.JoinWaitlist)}catch(e){a(I.JoinWaitlist)}},new((n=void 0)||(n=Promise))((function(i,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function c(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}a((o=o.apply(e,t||[])).next())}))}),[]);const m=(0,i.useCallback)((e=>{e||t.closeModal()}),[t]),_=(0,i.useCallback)((()=>a(I.Done)),[]),d=(0,i.useMemo)((()=>n===I.Loading?(0,o.Y)(l,{}):n===I.Done?(0,o.Y)(b,{}):(0,o.Y)(P,{onJoinWaitlist:_})),[n,_]);return(0,o.Y)(r.nOL,{open:e,onOpenChange:m,outsidePressDismiss:!1,width:"small",style:{zIndex:3e3,maxWidth:"25rem"},children:d})}))}}]);