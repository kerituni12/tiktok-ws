"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9835],{58673:(t,e,s)=>{s.d(e,{I:()=>_});const n="undefined"==typeof window||"Deno"in window;function i(){}function r(t){return"number"==typeof t&&t>=0&&t!==1/0}function o(t,e){if(t===e)return t;const s=a(t)&&a(e);if(s||h(t)&&h(e)){const n=s?t.length:Object.keys(t).length,i=s?e:Object.keys(e),r=i.length,l=s?[]:{};let a=0;for(let n=0;n<r;n++){const r=s?n:i[n];l[r]=o(t[r],e[r]),l[r]===t[r]&&a++}return n===r&&a===n?t:l}return e}function l(t,e){if(t&&!e||e&&!t)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function a(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function h(t){if(!u(t))return!1;const e=t.constructor;if(void 0===e)return!0;const s=e.prototype;return!!u(s)&&!!s.hasOwnProperty("isPrototypeOf")}function u(t){return"[object Object]"===Object.prototype.toString.call(t)}function c(t){new Promise((t=>{setTimeout(t,0)})).then(t)}function d(t,e,s){return null!=s.isDataEqual&&s.isDataEqual(t,e)?t:"function"==typeof s.structuralSharing?s.structuralSharing(t,e):!1!==s.structuralSharing?o(t,e):e}const f=function(){let t=[],e=0,s=t=>{t()},n=t=>{t()};const i=n=>{e?t.push(n):c((()=>{s(n)}))};return{batch:i=>{let r;e++;try{r=i()}finally{e--,e||(()=>{const e=t;t=[],e.length&&c((()=>{n((()=>{e.forEach((t=>{s(t)}))}))}))})()}return r},batchCalls:t=>(...e)=>{i((()=>{t(...e)}))},schedule:i,setNotifyFunction:t=>{s=t},setBatchNotifyFunction:t=>{n=t}}}();class p{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const e={listener:t};return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const m=new class extends p{constructor(){super(),this.setup=t=>{if(!n&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),()=>{window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach((({listener:t})=>{t()}))}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}},g=["online","offline"],v=new class extends p{constructor(){super(),this.setup=t=>{if(!n&&window.addEventListener){const e=()=>t();return g.forEach((t=>{window.addEventListener(t,e,!1)})),()=>{g.forEach((t=>{window.removeEventListener(t,e)}))}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setOnline(t):this.onOnline()}))}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach((({listener:t})=>{t()}))}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}};class y{constructor(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}}class b extends p{constructor(t,e){super(),this.client=t,this.options=e,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(e)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),S(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return R(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return R(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,e){const s=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),l(s,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();const i=this.hasListeners();i&&E(this.currentQuery,n,this.options,s)&&this.executeFetch(),this.updateResult(e),!i||this.currentQuery===n&&this.options.enabled===s.enabled&&this.options.staleTime===s.staleTime||this.updateStaleTimeout();const r=this.computeRefetchInterval();!i||this.currentQuery===n&&this.options.enabled===s.enabled&&r===this.currentRefetchInterval||this.updateRefetchInterval(r)}getOptimisticResult(t){const e=this.client.getQueryCache().build(this.client,t),s=this.createResult(e,t);return function(t,e,s){return!s.keepPreviousData&&(void 0!==s.placeholderData?e.isPlaceholderData:!l(t.getCurrentResult(),e))}(this,s,t)&&(this.currentResult=s,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),s}getCurrentResult(){return this.currentResult}trackResult(t){const e={};return Object.keys(t).forEach((s=>{Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(s),t[s])})})),e}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...e}={}){return this.fetch({...e,meta:{refetchPage:t}})}fetchOptimistic(t){const e=this.client.defaultQueryOptions(t),s=this.client.getQueryCache().build(this.client,e);return s.isFetchingOptimistic=!0,s.fetch().then((()=>this.createResult(s,e)))}fetch(t){var e;return this.executeFetch({...t,cancelRefetch:null==(e=t.cancelRefetch)||e}).then((()=>(this.updateResult(),this.currentResult)))}executeFetch(t){this.updateQuery();let e=this.currentQuery.fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(i)),e}updateStaleTimeout(){if(this.clearStaleTimeout(),n||this.currentResult.isStale||!r(this.options.staleTime))return;var t,e;const s=(t=this.currentResult.dataUpdatedAt,e=this.options.staleTime,Math.max(t+(e||0)-Date.now(),0)+1);this.staleTimeoutId=setTimeout((()=>{this.currentResult.isStale||this.updateResult()}),s)}computeRefetchInterval(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!n&&!1!==this.options.enabled&&r(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||m.isFocused())&&this.executeFetch()}),this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,e){const s=this.currentQuery,n=this.options,i=this.currentResult,r=this.currentResultState,o=this.currentResultOptions,l=t!==s,a=l?t.state:this.currentQueryInitialState,h=l?this.currentResult:this.previousQueryResult,{state:u}=t;let c,{dataUpdatedAt:f,error:p,errorUpdatedAt:m,fetchStatus:g,status:y}=u,b=!1,R=!1;if(e._optimisticResults){const i=this.hasListeners(),r=!i&&S(t,e),o=i&&E(t,s,e,n);(r||o)&&(g="online"!==(null!=(O=t.options.networkMode)?O:"online")||v.isOnline()?"fetching":"paused",f||(y="loading")),"isRestoring"===e._optimisticResults&&(g="idle")}var O;if(e.keepPreviousData&&!u.dataUpdatedAt&&null!=h&&h.isSuccess&&"error"!==y)c=h.data,f=h.dataUpdatedAt,y=h.status,b=!0;else if(e.select&&void 0!==u.data)if(i&&u.data===(null==r?void 0:r.data)&&e.select===this.selectFn)c=this.selectResult;else try{this.selectFn=e.select,c=e.select(u.data),c=d(null==i?void 0:i.data,c,e),this.selectResult=c,this.selectError=null}catch(t){this.selectError=t}else c=u.data;if(void 0!==e.placeholderData&&void 0===c&&"loading"===y){let t;if(null!=i&&i.isPlaceholderData&&e.placeholderData===(null==o?void 0:o.placeholderData))t=i.data;else if(t="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),this.selectError=null}catch(t){this.selectError=t}void 0!==t&&(y="success",c=d(null==i?void 0:i.data,t,e),R=!0)}this.selectError&&(p=this.selectError,c=this.selectResult,m=Date.now(),y="error");const C="fetching"===g,I="loading"===y,x="error"===y;return{status:y,fetchStatus:g,isLoading:I,isSuccess:"success"===y,isError:x,isInitialLoading:I&&C,data:c,dataUpdatedAt:f,error:p,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>a.dataUpdateCount||u.errorUpdateCount>a.errorUpdateCount,isFetching:C,isRefetching:C&&!I,isLoadingError:x&&0===u.dataUpdatedAt,isPaused:"paused"===g,isPlaceholderData:R,isPreviousData:b,isRefetchError:x&&0!==u.dataUpdatedAt,isStale:w(t,e),refetch:this.refetch,remove:this.remove}}updateResult(t){const e=this.currentResult,s=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,l(s,e))return;this.currentResult=s;const n={cache:!0};!1!==(null==t?void 0:t.listeners)&&(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!this.trackedProps.size)return!0;const n=new Set(null!=s?s:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some((t=>{const s=t;return this.currentResult[s]!==e[s]&&n.has(s)}))})()&&(n.listeners=!0),this.notify({...n,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const e={};"success"===t.type?e.onSuccess=!t.manual:"error"!==t.type||t.error instanceof y||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()}notify(t){f.batch((()=>{var e,s,n,i;if(t.onSuccess)null==(e=(s=this.options).onSuccess)||e.call(s,this.currentResult.data),null==(n=(i=this.options).onSettled)||n.call(i,this.currentResult.data,null);else if(t.onError){var r,o,l,a;null==(r=(o=this.options).onError)||r.call(o,this.currentResult.error),null==(l=(a=this.options).onSettled)||l.call(a,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach((({listener:t})=>{t(this.currentResult)})),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})}))}}function S(t,e){return function(t,e){return!(!1===e.enabled||t.state.dataUpdatedAt||"error"===t.state.status&&!1===e.retryOnMount)}(t,e)||t.state.dataUpdatedAt>0&&R(t,e,e.refetchOnMount)}function R(t,e,s){if(!1!==e.enabled){const n="function"==typeof s?s(t):s;return"always"===n||!1!==n&&w(t,e)}return!1}function E(t,e,s,n){return!1!==s.enabled&&(t!==e||!1===n.enabled)&&(!s.suspense||"error"!==t.state.status)&&w(t,s)}function w(t,e){return t.isStaleByTime(e.staleTime)}var O=s(40099);const C=s(99254).useSyncExternalStore;const I=O.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),x=()=>O.useContext(I),M=O.createContext(void 0),T=O.createContext(!1);const z=({context:t}={})=>{const e=O.useContext(function(t,e){return t||(e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=M),window.ReactQueryClientContext):M)}(t,O.useContext(T)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},F=O.createContext(!1),Q=()=>O.useContext(F);F.Provider;const A=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},D=t=>{O.useEffect((()=>{t.clearReset()}),[t])},L=({result:t,errorResetBoundary:e,useErrorBoundary:s,query:n})=>{return t.isError&&!e.isReset()&&!t.isFetching&&(i=s,r=[t.error,n],"function"==typeof i?i(...r):!!i);var i,r},k=t=>{t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)},U=(t,e,s)=>(null==t?void 0:t.suspense)&&((t,e)=>t.isLoading&&t.isFetching&&!e)(e,s),P=(t,e,s)=>e.fetchOptimistic(t).then((({data:e})=>{null==t.onSuccess||t.onSuccess(e),null==t.onSettled||t.onSettled(e,null)})).catch((e=>{s.clearReset(),null==t.onError||t.onError(e),null==t.onSettled||t.onSettled(void 0,e)}));function _(t,e,s){const n=function(t,e,s){return n=t,Array.isArray(n)?"function"==typeof e?{...s,queryKey:t,queryFn:e}:{...e,queryKey:t}:t;var n}(t,e,s);return function(t,e){const s=z({context:t.context}),n=Q(),i=x(),r=s.defaultQueryOptions(t);r._optimisticResults=n?"isRestoring":"optimistic",r.onError&&(r.onError=f.batchCalls(r.onError)),r.onSuccess&&(r.onSuccess=f.batchCalls(r.onSuccess)),r.onSettled&&(r.onSettled=f.batchCalls(r.onSettled)),k(r),A(r,i),D(i);const[o]=O.useState((()=>new e(s,r))),l=o.getOptimisticResult(r);if(C(O.useCallback((t=>{const e=n?()=>{}:o.subscribe(f.batchCalls(t));return o.updateResult(),e}),[o,n]),(()=>o.getCurrentResult()),(()=>o.getCurrentResult())),O.useEffect((()=>{o.setOptions(r,{listeners:!1})}),[r,o]),U(r,l,n))throw P(r,o,i);if(L({result:l,errorResetBoundary:i,useErrorBoundary:r.useErrorBoundary,query:o.getCurrentQuery()}))throw l.error;return r.notifyOnChangeProps?l:o.trackResult(l)}(n,b)}},59755:(t,e,s)=>{s.d(e,{Te:()=>b});var n=s(40099),i=s(18499);function r(t,e,s){let n,i=s.initialDeps??[];function r(){var r,o,l,a;let h;s.key&&(null==(r=s.debug)?void 0:r.call(s))&&(h=Date.now());const u=t();if(u.length===i.length&&!u.some(((t,e)=>i[e]!==t)))return n;let c;if(i=u,s.key&&(null==(o=s.debug)?void 0:o.call(s))&&(c=Date.now()),n=e(...u),s.key&&(null==(l=s.debug)?void 0:l.call(s))){const t=Math.round(100*(Date.now()-h))/100,e=Math.round(100*(Date.now()-c))/100,n=e/16,i=(t,e)=>{for(t=String(t);t.length<e;)t=" "+t;return t};console.info(`%c⏱ ${i(e,5)} /${i(t,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*n,120))}deg 100% 31%);`,null==s?void 0:s.key)}return null==(a=null==s?void 0:s.onChange)||a.call(s,n),n}return r.updateDeps=t=>{i=t},r}function o(t,e){if(void 0===t)throw new Error("Unexpected undefined"+(e?`: ${e}`:""));return t}const l=(t,e,s)=>{let n;return function(...i){t.clearTimeout(n),n=t.setTimeout((()=>e.apply(this,i)),s)}},a=t=>t,h=t=>{const e=Math.max(t.startIndex-t.overscan,0),s=Math.min(t.endIndex+t.overscan,t.count-1),n=[];for(let t=e;t<=s;t++)n.push(t);return n},u=(t,e)=>{const s=t.scrollElement;if(!s)return;const n=t.targetWindow;if(!n)return;const i=t=>{const{width:s,height:n}=t;e({width:Math.round(s),height:Math.round(n)})};if(i(s.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const r=new n.ResizeObserver((e=>{const n=()=>{const t=e[0];if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e)return void i({width:e.inlineSize,height:e.blockSize})}i(s.getBoundingClientRect())};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()}));return r.observe(s,{box:"border-box"}),()=>{r.unobserve(s)}},c={passive:!0},d="undefined"==typeof window||"onscrollend"in window,f=(t,e)=>{const s=t.scrollElement;if(!s)return;const n=t.targetWindow;if(!n)return;let i=0;const r=t.options.useScrollendEvent&&d?()=>{}:l(n,(()=>{e(i,!1)}),t.options.isScrollingResetDelay),o=n=>()=>{const{horizontal:o,isRtl:l}=t.options;i=o?s.scrollLeft*(l?-1:1):s.scrollTop,r(),e(i,n)},a=o(!0),h=o(!1);h(),s.addEventListener("scroll",a,c);const u=t.options.useScrollendEvent&&d;return u&&s.addEventListener("scrollend",h,c),()=>{s.removeEventListener("scroll",a),u&&s.removeEventListener("scrollend",h)}},p=(t,e,s)=>{if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return Math.round(t[s.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[s.options.horizontal?"width":"height"])},m=(t,{adjustments:e=0,behavior:s},n)=>{var i,r;const o=t+e;null==(r=null==(i=n.scrollElement)?void 0:i.scrollTo)||r.call(i,{[n.options.horizontal?"left":"top"]:o,behavior:s})};class g{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const e=()=>t||(this.targetWindow&&this.targetWindow.ResizeObserver?t=new this.targetWindow.ResizeObserver((t=>{t.forEach((t=>{const e=()=>{this._measureElement(t.target,t)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(e):e()}))})):null);return{disconnect:()=>{var s;null==(s=e())||s.disconnect(),t=null},observe:t=>{var s;return null==(s=e())?void 0:s.observe(t,{box:"border-box"})},unobserve:t=>{var s;return null==(s=e())?void 0:s.unobserve(t)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach((([e,s])=>{void 0===s&&delete t[e]})),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:a,rangeExtractor:h,onChange:()=>{},measureElement:p,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var e,s;null==(s=(e=this.options).onChange)||s.call(e,this,t)},this.maybeNotify=r((()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null])),(t=>{this.notify(t)}),{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach((t=>t())),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const e=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==e){if(this.cleanup(),!e)return void this.maybeNotify();this.scrollElement=e,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(t=this.scrollElement)?void 0:t.window)??null,this.elementsCache.forEach((t=>{this.observer.observe(t)})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,(t=>{this.scrollRect=t,this.maybeNotify()}))),this.unsubs.push(this.options.observeElementOffset(this,((t,e)=>{this.scrollAdjustments=0,this.scrollDirection=e?this.getScrollOffset()<t?"forward":"backward":null,this.scrollOffset=t,this.isScrolling=e,this.maybeNotify()})))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,e)=>{const s=new Map,n=new Map;for(let i=e-1;i>=0;i--){const e=t[i];if(s.has(e.lane))continue;const r=n.get(e.lane);if(null==r||e.end>r.end?n.set(e.lane,e):e.end<r.end&&s.set(e.lane,!0),s.size===this.options.lanes)break}return n.size===this.options.lanes?Array.from(n.values()).sort(((t,e)=>t.end===e.end?t.index-e.index:t.end-e.end))[0]:void 0},this.getMeasurementOptions=r((()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled]),((t,e,s,n,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:e,scrollMargin:s,getItemKey:n,enabled:i})),{key:!1}),this.getMeasurements=r((()=>[this.getMeasurementOptions(),this.itemSizeCache]),(({count:t,paddingStart:e,scrollMargin:s,getItemKey:n,enabled:i},r)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((t=>{this.itemSizeCache.set(t.key,t.size)})));const o=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const l=this.measurementsCache.slice(0,o);for(let i=o;i<t;i++){const t=n(i),o=1===this.options.lanes?l[i-1]:this.getFurthestMeasurement(l,i),a=o?o.end+this.options.gap:e+s,h=r.get(t),u="number"==typeof h?h:this.options.estimateSize(i),c=a+u,d=o?o.lane:i%this.options.lanes;l[i]={index:i,start:a,size:u,end:c,key:t,lane:d}}return this.measurementsCache=l,l}),{key:!1,debug:()=>this.options.debug}),this.calculateRange=r((()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes]),((t,e,s,n)=>this.range=t.length>0&&e>0?function({measurements:t,outerSize:e,scrollOffset:s,lanes:n}){const i=t.length-1;let r=v(0,i,(e=>t[e].start),s),o=r;if(1===n)for(;o<i&&t[o].end<s+e;)o++;else if(n>1){const l=Array(n).fill(0);for(;o<i&&l.some((t=>t<s+e));){const e=t[o];l[e.lane]=e.end,o++}const a=Array(n).fill(s+e);for(;r>0&&a.some((t=>t>=s));){const e=t[r];a[e.lane]=e.start,r--}r=Math.max(0,r-r%n),o=Math.min(i,o+(n-1-o%n))}return{startIndex:r,endIndex:o}}({measurements:t,outerSize:e,scrollOffset:s,lanes:n}):null),{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=r((()=>{let t=null,e=null;const s=this.calculateRange();return s&&(t=s.startIndex,e=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,e]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,e]}),((t,e,s,n,i)=>null===n||null===i?[]:t({startIndex:n,endIndex:i,overscan:e,count:s})),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const e=this.options.indexAttribute,s=t.getAttribute(e);return s?parseInt(s,10):(console.warn(`Missing attribute name '${e}={index}' on measured element.`),-1)},this._measureElement=(t,e)=>{const s=this.indexFromElement(t),n=this.measurementsCache[s];if(!n)return;const i=n.key,r=this.elementsCache.get(i);r!==t&&(r&&this.observer.unobserve(r),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,e,this))},this.resizeItem=(t,e)=>{const s=this.measurementsCache[t];if(!s)return;const n=e-(this.itemSizeCache.get(s.key)??s.size);0!==n&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(s,n,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=n,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,e)),this.notify(!1))},this.measureElement=t=>{t?this._measureElement(t,void 0):this.elementsCache.forEach(((t,e)=>{t.isConnected||(this.observer.unobserve(t),this.elementsCache.delete(e))}))},this.getVirtualItems=r((()=>[this.getVirtualIndexes(),this.getMeasurements()]),((t,e)=>{const s=[];for(let n=0,i=t.length;n<i;n++){const i=e[t[n]];s.push(i)}return s}),{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const e=this.getMeasurements();if(0!==e.length)return o(e[v(0,e.length-1,(t=>o(e[t]).start),t)])},this.getOffsetForAlignment=(t,e,s=0)=>{const n=this.getSize(),i=this.getScrollOffset();"auto"===e&&(e=t>=i+n?"end":"start"),"center"===e?t+=(s-n)/2:"end"===e&&(t-=n);const r=this.options.horizontal?"scrollWidth":"scrollHeight",o=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[r]:this.scrollElement[r]:0)-n;return Math.max(Math.min(o,t),0)},this.getOffsetForIndex=(t,e="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const n=this.getSize(),i=this.getScrollOffset();if("auto"===e)if(s.end>=i+n-this.options.scrollPaddingEnd)e="end";else{if(!(s.start<=i+this.options.scrollPaddingStart))return[i,e];e="start"}const r="end"===e?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,e,s.size),e]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:e="start",behavior:s}={})=>{this.cancelScrollToIndex(),"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,e),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:e="auto",behavior:s}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const n=this.getOffsetForIndex(t,e);if(!n)return;const[i,r]=n;this._scrollToOffset(i,{adjustments:void 0,behavior:s}),"smooth"!==s&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout((()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[i]=o(this.getOffsetForIndex(t,r));e=i,n=this.getScrollOffset(),Math.abs(e-n)<1||this.scrollToIndex(t,{align:r,behavior:s})}else this.scrollToIndex(t,{align:r,behavior:s});var e,n})))},this.scrollBy=(t,{behavior:e}={})=>{this.cancelScrollToIndex(),"smooth"===e&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:e})},this.getTotalSize=()=>{var t;const e=this.getMeasurements();let s;if(0===e.length)s=this.options.paddingStart;else if(1===this.options.lanes)s=(null==(t=e[e.length-1])?void 0:t.end)??0;else{const t=Array(this.options.lanes).fill(null);let n=e.length-1;for(;n>0&&t.some((t=>null===t));){const s=e[n];null===t[s.lane]&&(t[s.lane]=s.end),n--}s=Math.max(...t.filter((t=>null!==t)))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:e,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:e},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const v=(t,e,s,n)=>{for(;t<=e;){const i=(t+e)/2|0,r=s(i);if(r<n)t=i+1;else{if(!(r>n))return i;e=i-1}}return t>0?t-1:0},y="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function b(t){return function(t){const e=n.useReducer((()=>({})),{})[1],s={...t,onChange:(s,n)=>{var r;n?(0,i.flushSync)(e):e(),null==(r=t.onChange)||r.call(t,s,n)}},[r]=n.useState((()=>new g(s)));return r.setOptions(s),y((()=>r._didMount()),[]),y((()=>r._willUpdate())),r}({observeElementRect:u,observeElementOffset:f,scrollToFn:m,...t})}}}]);